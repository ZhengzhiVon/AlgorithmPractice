# 27 移除元素

**给你一个数组 nums 和一个值 val，你需要 原地 移除所有数值等于 val 的元素，并返回移除后数组的新长度。**

**不要使用额外的数组空间，你必须仅使用 O(1) 额外空间并 原地 修改输入数组。元素的顺序可以改变。你不需要考虑数组中超出新长度后面的元素。**

```c++
输入：nums = [3,2,2,3], val = 3
输出：2, nums = [2,2]
解释：函数应该返回新的长度 2, 并且 nums 中的前两个元素均为 2。你不需要考虑数组中超出新长度后面的元素。例如，函数返回的新长度为 2 ，而 nums = [2,2,3,3] 或 nums = [2,2,0,0]，也会被视作正确答案。
```

## 思路&代码

### 思路

**双指针法（快慢指针）**

- 定义 slow 指针和 fast 指针，初始值均为 0。
- 遍历整个数组，当 fast 指针指向的元素不等于给定值 val 时，将该元素替换到 slow 指针指向的位置，同时 slow 指针向后移动一位。
- 最终返回 slow 指针的位置，即为新数组的长度。

要求删除数组中指定元素，我们需要将不等于给定值 val 的元素保留下来，同时将它们移动到数组前面，使得数组中从 0 到 slow-1 的位置上的元素都不等于 val。因此，当 fast 指针指向的元素不等于给定值 val 时，我们需要将该元素替换到 slow 指针指向的位置，同时 slow 指针向后移动一位，以便接收下一个不等于 val 的元素。

### 代码

```c++
//双指针法
//时间复杂度：O(n)，其中 n 为数组长度。
//空间复杂度：O(1)。

class Solution {
public:
    int removeElement(vector<int>& nums, int val) {
      int slow=0;
      for(int fast=0;fast<nums.size();fast++){
          if(val!=nums[fast]){
              nums[slow++]=nums[fast];
          }
      }
      return slow;
    }
};
```

具体演示：

```c++
测试用例是 nums = [3, 2, 2, 3]，val = 3。

初始化 slow = 0，fast = 0。

遍历整个数组，当 fast 指针指向的元素不等于给定值 val 时，将该元素替换到 slow 指针指向的位置，同时 slow 指针向后移动一位。

第一次遍历，nums[fast] = 3，等于给定值 val。跳过不处理。
第二次遍历，nums[fast] = 2，不等于给定值 val。将 nums[fast] 替换到 nums[slow] 上，即 nums[0] = 2，slow = 1。
第三次遍历，nums[fast] = 2，不等于给定值 val。将 nums[fast] 替换到 nums[slow] 上，即 nums[1] = 2，slow = 2。
第四次遍历，nums[fast] = 3，等于给定值 val。跳过不处理。
遍历完成，返回 slow 的值 2，即为新数组的长度。

数组 nums 中前 2 个元素是 [2, 2]，符合预期。

因此，当 nums = [3, 2, 2, 3]，val = 3 时，该函数的输出结果为 2。
```

